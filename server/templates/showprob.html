{% extends "base.html" %}
{% block headers %}
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  
<title> 显示题目 </title>
<link rel="stylesheet" href="{{url_for('static',filename='css/bootstrap.min.css')}}">
<link rel="stylesheet" href="{{url_for('static',filename='css/bootstrap-theme.min.css')}}">
<!--link rel="stylesheet" href="{{url_for('static',filename='editor.md/examples/css/style.css')}}" /-->
<link rel="stylesheet" href="{{url_for('static',filename='editor.md/css/editormd.preview.css')}}" />
<link rel="shortcut icon" href="https://pandao.github.io/editor.md/favicon.ico" type="image/x-icon" />
{% endblock %}

{% block content %}
<div class="row">
  <div class="col col-md-9" style="padding-left:0">
    <div id="layout">
      <div id="editormd-view">
        <textarea id="append-test" style="display:none;">
          {%if context  %}
          {{context}}
          {%else%}
The problem is not avilable now.
          {%endif%}
        </textarea>          
      </div>
    </div>
  </div>
  <div class="col col-md-3">
    <div class="panel panel-info">
      <div class="panel-body yahei">
        <h3> 解决题目</h3>
      </div>
      <table class="table">
        <tr><td> <a href="submit?pid={{pid}}"> 提交代码</a> </td></tr>
        <tr><td> <a href="status"> 我的提交</a> </td></tr>
        <tr><td> <a href="#"> 查看题解</a> </td></tr>
      </table>
    </div>
    <div class="panel panel-info">
      <div class="panel-body yahei">
        <h3> 管理此题 </h3>
        只有通过此题的用户能查看
      </div>
      <table class="table">
        <tr><td> <a href="#"> 相关算法 </a> </td></tr>
        <tr><td> <a href="code"> 开放代码 </a> </td></tr>
        <tr><td> <a href="#"> 发布题解 </a> </td></tr>
      </table>
    </div>
  </div>
  <!-- <script src="js/zepto.min.js"></script>
  <script>		
var jQuery = Zepto;  // 为了避免修改flowChart.js和sequence-diagram.js的源码，所以使用Zepto.js时想支持flowChart/sequenceDiagram就得加上这一句
  </script> -->
  <script src="{{url_for('static',filename='js/jquery-2.0.3.min.js')}}"></script>
  <script src="{{url_for('static',filename='editor.md/lib/marked.min.js')}}"></script>
  <script src="{{url_for('static',filename='editor.md/lib/prettify.min.js')}}"></script>
  <script src="{{url_for('static',filename='editor.md/lib/raphael.min.js')}}"></script>
  <script src="{{url_for('static',filename='editor.md/lib/underscore.min.js')}}"></script>
  <script src="{{url_for('static',filename='editor.md/lib/sequence-diagram.min.js')}}"></script>
  <script src="{{url_for('static',filename='editor.md/lib/flowchart.min.js')}}"></script>
  <script src="{{url_for('static',filename='editor.md/lib/jquery.flowchart.min.js')}}"></script>

  <script src="{{url_for('static',filename='editor.md/editormd.js')}}"></script>
  <script type="text/javascript">
$(function() {
  var showpost;
  /*
     $.get("test.md", function(markdown) {

     testEditormdView = editormd.markdownToHTML("test-editormd-view", {
     markdown        : markdown ,//+ "\r\n" + $("#append-test").text(),
  //htmlDecode      : true,       // 开启 HTML 标签解析，为了安全性，默认不开启
  htmlDecode      : "style,script,iframe",  // you can filter tags decode
  //toc             : false,
  tocm            : true,    // Using [TOCM]
  //tocContainer    : "#custom-toc-container", // 自定义 ToC 容器层
  //gfm             : false,
  //tocDropdown     : true,
  // markdownSourceCode : true, // 是否保留 Markdown 源码，即是否删除保存源码的 Textarea 标签
  emoji           : true,
  taskList        : true,
  tex             : true,  // 默认不解析
  flowChart       : true,  // 默认不解析
  sequenceDiagram : true,  // 默认不解析
  });

  //console.log("返回一个 jQuery 实例 =>", testEditormdView);

  // 获取Markdown源码
  //console.log(testEditormdView.getMarkdown());

  //alert(testEditormdView.getMarkdown());
  });
   */

  showpost = editormd.markdownToHTML("editormd-view", {
    htmlDecode      : "style,script,iframe",  // you can filter tags decode
    emoji           : true,
    taskList        : true,
    tex             : true,  // 默认不解析
    flowChart       : true,  // 默认不解析
    sequenceDiagram : true,  // 默认不解析
  });
});
  </script>
</div>
{% endblock %}
